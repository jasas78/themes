<html>
    <head>
        <title> {{ .Params.title }} </title>

        <meta http-equiv="content-type"    content="text/html; charset=utf-8" />

        <style>

        </style>
        <!--
            table, th, td {
            border: 1px solid black;
            }
        -->

        <style>
@media all and (orientation: portrait) {
    div.tbL { display: none;         }
    div.tbP { display: inline-block; }
}
@media all and (orientation: landscape) {
    div.tbL { display: inline-block; }
    div.tbP { display: none;         }
}
        </style>

    </head>
    <body>

        <!--
            <h1 style="text-align:center" > {{ .Params.title }} </h1>
            <table class="tbP"><tr><td>tbP</td></tr></table>
            <table class="tbL"><tr><td>tbL</td></tr></table>

        -->



        {{ $divHorigin := 400 }} 
        {{ $divWorigin := 300 }}
        {{ $divH := "" }} 
        {{ $divW := "" }}
        {{ with .Params.indexHeight }} {{ $divHorigin = . }} {{ end }}
        {{ with .Params.indexWidth  }} {{ $divWorigin = . }} {{ end }}
        {{- $TDamount := len .Params.indexSET }}
        {{- $tmaxOrigin := 3 -}}
        {{- $tmax := 3 -}}
        {{- $tbClass := "tbL" -}}
        {{- if .Params.tableMax -}} {{- $tmaxOrigin = .Params.tableMax -}} {{- end -}}
        {{- $indexSET := .Params.indexSET }}

        {{- range $tbIdx, $tbValue := (slice 1 2) }}
        {{- if eq $tbIdx 0 }}
        {{- $tmax = $tmaxOrigin }}
        {{- $tbClass = "tbP" }}
        {{- $divH = add $divHorigin $divHorigin }}
        {{- $divW = add $divWorigin $divWorigin }}
        {{- else }}
        {{- $tmax = add $tmaxOrigin $tmaxOrigin }}
        {{- $tbClass = "tbL" }}
        {{- $divH = $divHorigin }}
        {{- $divW = $divWorigin }}
        {{- end }}
        <div
            class="{{ $tbClass }}"
            >
        <table 
               style="border: 5px solid red; table-layout:fixed; float:center; "
               align="center" 
               >
               <tr >
                   <td style="text-align:center; "  >
                       {{- $ee1:="" -}} {{- $ee2:="" -}} {{- $ee3:="" -}}
                       {{- $tidx := 1 -}}
                       {{- $TDidx := 1 }}


                       {{- range $elem_index, $elem_val := $indexSET }}

                       {{- $arr1 := split $elem_val "," -}}

                       {{- if len $arr1 | eq 3 }}
                       {{- $ee1 = index $arr1 0 -}}
                       {{- $ee2 = index $arr1 1 -}}
                       {{- $ee3 = index $arr1 2 -}}
                       <img 
                       title="{{ $ee1 }} : {{ $ee3 }}" 
                       alt="{{ $ee2 }}"
                       src="{{ $ee2 }}"
                       style="max-width:{{ $divW }}; "
                       onclick="window.open(
                       '{{ $ee3 }}'
                       , '_blank');"
                       />
                       {{- end }}


                       {{- if len $arr1 | eq 2 -}}
                       {{- $ee1 = index $arr1 0 -}}
                       {{- $ee2 = index $arr1 1 -}}
                       <a 
                       href="{{ $ee2 }}"
                       >
                       <table 
                       style="max-width:{{ $divW }}; "
                       align="center"
                       >
                       <caption> {{$ee1 }} </caption>
                       <tr><td style="text-align:center; "  >
                               {{ $ee2 }}
                           </td></tr>
                       </table>
                       </a>
                   {{- end }}

                   {{ if eq $TDamount $TDidx }} </td>
               </tr>
               {{- else }}
               {{ if eq $tmax $tidx }} </td>
           <tr>
               <td style="text-align:center; "  > {{ $tidx = 1 }}
                   {{ else }} </td>
               <td style="text-align:center; "  > {{ $tidx = add $tidx  1 }}
                   {{- end }}
                   {{- end }}
                   {{- $TDidx = add $TDidx 1 }}

                   {{ end }}
        </table>
        </div>
                   {{ end }}

    </body>
</html>

