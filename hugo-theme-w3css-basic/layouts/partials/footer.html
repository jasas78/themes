{{- if or $.Site.Params.debug (findRE `\bhtml-comment\b` $.Site.Params.traceFlags) }}
  {{ `<!-- partials/footer.html  -->` | safeHTML }}
{{- end}}
<div id="footer" class='w3-container {{ default `w3-theme-d5` ($.Site.Param `colorFooterContainer`)}} '>

  <div class="w3-margin-bottom w3-row w3-mobile">

    {{- if or $.Site.Params.debug (findRE `\bhtml-comment\b` $.Site.Params.traceFlags) }}
      {{ `<!-- Site.Params.aboutUs  -->` | safeHTML }}
    {{- end}}
    {{- if $.Site.Params.aboutUs }}
    <div class="w3-col w3-third">
        <table><tr><td>
      <h4>{{ default `About` (i18n `aboutUs`) }}</h4>
      <div class="notranslate"><a
              {{ if $.Site.Param `footerAboutButton` }}
              {{ with ($.Site.GetPage `page` ($.Site.Param `footerAboutButton`)) }}
              href='{{ .Permalink | absURL }}{{ if $.Site.Params.uglyURLs }}{{$.Site.Params.uglyUrl}}{{ end }}'
              {{end}}
              {{end}}
              target="_blank" 
              class='w3-button {{ default `w3-theme-l4` ($.Site.Param `colorFooterButton`)}} '
              >
              {{- $.Site.Params.aboutUs | markdownify }}
          </a></div>
                </td><td>

          {{- if isset $.Site.Params (lower `footerLogo` ) }}
          <div id="footerLogo" class="w3-col w3-third">
            <img src="{{- $.Site.Params.footerLogo | markdownify -}}"
            alt="footerLogo"
            width="300" 
            height="300">
          </div>
          {{- end }} {{/* footerLogo */}}
                </td></tr></table>

    </div> <!-- w3-col -->
    {{- end }} {{/* if aboutUs */}}

    {{- if or $.Site.Params.debug (findRE `\bhtml-comment\b` $.Site.Params.traceFlags) }}
      {{ `<!-- Site.Params.recentPosts  -->` | safeHTML }}
    {{- end}}
    {{- if isset $.Site.Params (lower `recentPosts` ) }}
    {{- if $.Site.Params.recentPosts.enableFooter }}
    {{- if $.Site.Params.recentPosts.footerNumOfPosts }}
    <div class="w3-col w3-third">
        <a style="font-size:120%">
            {{ default `Posts最近更新` (i18n `recentPosts`) }} : </a>
        <a style="font-size:20%">
            {{ hugo.Version }} </a>

      {{- if or $.Site.Params.debug (findRE `\bhtml-comment\b` $.Site.Params.traceFlags) }}
        {{ `<!-- range first Site.Params.footerNumOfPosts .Site.RegularPages "Section" "blog" -->` | safeHTML }}
      {{- end}}
      {{- range first $.Site.Params.recentPosts.footerNumOfPosts (where .Site.RegularPages `Section` `blog`) }}

        <div class="w3-container " style="border:1px dotted Tomato;" >
          <a class="no-decoration" target="_blank" href='{{ .RelPermalink }}'>

          {{- $myImgClass  := `w3-image w3-left w3-round w3-hover-opacity` }}
          {{- $myImgStyle  := `max-width:60px; max-height:20px; width: auto; height: auto; margin: 0px 8px 16px 0px;` }}
          {{- $myImg       := .Param `resImgTeaser`                       }} {{/* case insensitive */}}
          {{- $myImgCmd    := .Param `resImgTeaserCmd` | default `Resize` }}
          {{- $myImgOpt    := .Param `resImgTeaserOpt` | default `60x`    }}
          {{ partial `resource.image.html` (dict `page` $.Page `class` $myImgClass `style` $myImgStyle `img` $myImg `cmd` $myImgCmd `opt` $myImgOpt ) }}

          </a>
          <a class="no-decoration" target="_blank" href='{{ .RelPermalink }}'>{{if .Params.icon}}<i class='{{ .Params.icon }}'></i>&nbsp;{{end}}{{ .Title  | markdownify | emojify }}</a>
        </div>
      <br>
      {{- end }} {{/* range */}}

    </div> <!-- w3-col -->
    {{- end }} {{/* if isset */}}
    {{- end }} {{/* if isset */}}
    {{- end }} {{/* if recentPosts.enableFooter */}}

    {{- if or $.Site.Params.debug (findRE `\bhtml-comment\b` $.Site.Params.traceFlags) }}
      {{ `<!-- Site.Params.address  -->` | safeHTML }}
    {{- end}}

    {{- if isset $.Site.Params (lower `address` ) }}
    <div id="address" class="w3-col w3-third">
      <h4>{{ default `Contact` (i18n `contactTitle`) }}</h4>
      <div class="notranslate"><a
           {{ if $.Site.Param `footerContactButton` }}
           {{ with ($.Site.GetPage `page` ($.Site.Param `footerContactButton`)) }}
           href='{{ .Permalink | absURL }}{{ if $.Site.Params.uglyURLs }}{{$.Site.Params.uglyUrl}}{{ end }}' 
           {{end}}
           {{end}}
           target="_blank" 
           class='w3-button {{ default `w3-theme-l4` ($.Site.Param `colorFooterButton`)}} '
           >{{- $.Site.Params.address | markdownify -}}</a></div><br/>
    </div>
    {{- end }} {{/* address */}}

    {{- if isset $.Site.Params (lower `donate` ) }}
    <div id="donate" class="w3-col w3-third">
      <h4>{{ default `Donate` (i18n `donateTitle`) }}</h4>
      <div class="notranslate"><a
           {{ if $.Site.Param `footerDonateButton` }}
           {{ with ($.Site.GetPage `page` ($.Site.Param `footerDonateButton`)) }}
           href='{{ .Permalink | absURL }}{{ if $.Site.Params.uglyURLs }}{{$.Site.Params.uglyUrl}}{{ end }}' 
           {{end}}
           {{end}}
           target="_blank" 
           class='w3-button {{ default `w3-theme-l4` ($.Site.Param `colorFooterButton`)}} '
           >{{- $.Site.Params.donate | markdownify -}}</a></div><br/>
    </div>
    {{- end }} {{/* donate */}}

  </div>  <!-- w3-row -->
</div>  <!-- w3-container -->
